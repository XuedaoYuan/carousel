{"version":3,"sources":["xdyuan_carousel.min.js"],"names":["window","document","xdyuanCarouselInit","obj","nextHandler","index","firstprev","translateVal","width","ul","css","changeColor","console","log","len","$","eq","prevHandler","indexObj","olis","currentBackgroundColor","siblings","backgroundColor","timerout","lis","containerIdentify","length","deltaX","deltaY","startX","startY","xdyuan_container","ol","append","position","right","bottom","i","li","html","isCenter","left","margin-left","remove","height","contaner_height","attr","each","ele","style","timer","setInterval","interval","on","e","changedTouches","pageX","pageY","setTimeout","clearTimeout","Math","abs","effectiveDeltaX","invalidDeltaY","clearInterval"],"mappings":"CAGA,SAAWA,EAAQC,GAEfD,EAAOE,mBAAqB,SAAUC,GAqFlC,SAASC,IACLC,GAAgB,EAEZC,IACAA,GAAY,GAEhBC,GAAgBC,EAChBC,EAAGC,IAAI,YAAa,eAAiBH,EAAe,kBACpDI,IACAC,QAAQC,IAAIR,GAGZA,EAASA,GAASS,EAAO,EAAIT,EAC7BM,IACSI,EAAE,MAAMC,GAAGX,GACjBK,IAAI,QAASH,GAIpB,SAASU,IACLZ,GAAgB,EACZC,IACAD,EAAQS,EAAM,EACdR,GAAY,GAEhBC,GAAgBC,EAChBC,EAAGC,IAAI,YAAa,eAAiBH,EAAe,kBACpDI,IACAC,QAAQC,IAAIR,GAEZA,EAASA,IAAU,EAAKS,EAAM,EAAIT,EAEzBU,EAAE,MAAMC,GAAGX,GACjBK,IAAI,QAASH,GAGpB,SAASI,IACFO,GACCC,EAAKH,GAAGX,GAAOK,IAAI,mBAAmBQ,EAASE,wBAAwBC,WAAWX,IAAI,mBAAmBQ,EAASI,iBAnH1H,IAAId,EAAQO,EAAE,QAAQP,QAElBe,EAAW,KACXC,EAAMT,EAAEZ,EAAIsB,kBAAkB,cAC9BX,EAAMU,EAAIE,OACVjB,EAAKM,EAAEZ,EAAIsB,kBAAkB,SAC7BlB,EAAe,EACfF,EAAQ,EACRC,GAAY,EACZqB,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAmBhB,EAAEZ,EAAIsB,mBACzBP,EAAWf,EAAIe,SAEfc,EAAKjB,EAAE,aACXgB,EAAiBE,OAAOD,GACxBA,EAAGtB,KACCwB,SAAU,WACVC,MAAO,EACPC,OAAQ,QAGZ,IAAK,IAAIC,EAAI,EAAGA,EAAIvB,EAAKuB,IAAK,CAC1B,IAAIC,EAAKvB,EAAE,aAAawB,KAAKF,GAC7BL,EAAGC,OAAOK,GAGd,IAAInB,EAAOJ,EAAEZ,EAAIsB,kBAAkB,cAI/BP,GACIA,EAASsB,SACTR,EAAGtB,KACC+B,KAAM,MACNL,OAAQlB,EAASkB,OAAS,KAE1BM,eAAgBV,EAAGxB,QAAU,EAAI,OAGrCwB,EAAGtB,KACC0B,OAAQlB,EAASkB,OAAS,KAC1BD,MAAOjB,EAASiB,MAAQ,OAG5BjB,EAASI,kBACTH,EAAKT,IAAI,mBAAoBQ,EAASI,iBACtCH,EAAKH,GAAG,GAAGN,IAAI,mBAAqBQ,EAASE,0BAKlDY,EAAGW,SAGNZ,EAAiBrB,KACbF,MAASA,EACToC,OAAUzC,EAAI0C,gBAAkB,OAEpC9B,EAAEZ,EAAIsB,kBAAkB,QAAQqB,MAC5BtC,MAAOA,EAAQ,KACfoC,OAAQzC,EAAI0C,gBAAkB,OAGlCrB,EAAIuB,KAAK,SAAU1C,EAAO2C,GAKtBA,EAAIC,MAAMR,KAJNpC,GAASS,EAAM,EAIFT,EAAQG,EAAQ,MAHXA,EAAQ,OAOlC,IAAI0C,EAAQC,YAAY/C,EAAaD,EAAIiD,UA6CzC5B,EAAI6B,GAAG,aAAc,SAAUC,GAC3BzB,EAASyB,EAAEC,eAAe,GAAGC,MAC7B1B,EAASwB,EAAEC,eAAe,GAAGE,QAGjCjC,EAAI6B,GAAG,YAEP,SAAoBC,GAChB3B,EAAS2B,EAAEC,eAAe,GAAGC,MAAQ3B,EACrCD,EAAS0B,EAAEC,eAAe,GAAGE,MAAQ3B,IAGzCN,EAAI6B,GAAG,WAAY,WACf9B,EAAWmC,WAAW,WAClBC,aAAapC,GACTqC,KAAKC,IAAIlC,IAAWxB,EAAI2D,iBAAmBF,KAAKC,IAAIjC,GAAUzB,EAAI4D,gBAClEC,cAAcd,GACVvB,EAAS,EAETV,IACOU,EAAS,GAChBvB,IAEJ8C,EAAQC,YAAY/C,EAAaD,EAAIiD,YAG1C,SAMZpD,OAAQC","file":"xdyuan_carousel.min.js","sourcesContent":["/**\n * Created by XuedaoYuan on 2017/6/29 上午11:47.\n */\n(function (window, document) {\n\n    window.xdyuanCarouselInit = function (obj) {\n        /*obj = {\n         effectiveDeltaX:80,\n         invalidDeltaY: 80,\n         interval : 5000\n         };*/\n\n\n        var width = $('body').width(),\n\n            timerout = null,\n            lis = $(obj.containerIdentify+' > ul > li'),\n            len = lis.length,\n            ul = $(obj.containerIdentify+' > ul'),\n            translateVal = 0,\n            index = 0,\n            firstprev = true,\n            deltaX = 0,\n            deltaY = 0,\n            startX = 0,\n            startY = 0,\n            xdyuan_container = $(obj.containerIdentify),\n            indexObj = obj.indexObj;\n\n        var ol = $('<ol></ol>');\n        xdyuan_container.append(ol);\n        ol.css({\n            position: 'absolute',\n            right: 0,\n            bottom: '5px'\n            // width : 20 * len + 'px'\n        });\n        for (var i = 0; i < len; i++) {\n            var li = $('<li></li>').html(i);\n            ol.append(li);\n        }\n\n        var olis = $(obj.containerIdentify+' > ol > li');\n\n\n\n        if (indexObj) {\n            if (indexObj.isCenter) {\n                ol.css({\n                    left: '50%',\n                    bottom: indexObj.bottom + 'px',\n                    //right: indexObj.right,\n                    'margin-left': -ol.width() / 2 + 'px'\n                });\n            } else {\n                ol.css({\n                    bottom: indexObj.bottom + 'px',\n                    right: indexObj.right + 'px'\n                });\n            }\n            if (indexObj.backgroundColor) {\n                olis.css('background-color', indexObj.backgroundColor);\n                olis.eq(0).css('background-color' , indexObj.currentBackgroundColor);\n\n            }\n\n        } else {\n           ol.remove();\n        }\n\n        xdyuan_container.css({\n            'width': width,\n            'height': obj.contaner_height + 'px'\n        });\n        $(obj.containerIdentify+' img').attr({\n            width: width + 'px',\n            height: obj.contaner_height + 'px'\n        });\n\n        lis.each(function (index, ele) {\n            if (index == len - 1) {\n                ele.style.left = -width + 'px';\n                return;\n            }\n            ele.style.left = index * width + 'px';\n        });\n\n\n        var timer = setInterval(nextHandler, obj.interval);\n\n        function nextHandler() {\n            index = index + 1;\n           // console.log(translateVal);\n            if (firstprev) {\n                firstprev = false;\n            }\n            translateVal -= width;\n            ul.css('transform', 'translate3d(' + translateVal + 'px , 0px, 0px)');\n            changeColor();\n            console.log(index);\n            // index = index + 1;\n\n            index = (index == len) ? 0 : index;\n            changeColor();\n            var li = $('li').eq(index);\n            li.css('left', -translateVal);\n\n        }\n\n        function prevHandler() {\n            index = index - 1;\n            if (firstprev) {\n                index = len - 1;\n                firstprev = false;\n            }\n            translateVal += width;\n            ul.css('transform', 'translate3d(' + translateVal + 'px , 0px, 0px)');\n            changeColor();\n            console.log(index);\n            // index = index - 1;\n            index = (index <= -1) ? len - 1 : index;\n\n            var li = $('li').eq(index);\n            li.css('left', -translateVal);\n\n        }\n        function changeColor() {\n            if(indexObj){\n                olis.eq(index).css('background-color',indexObj.currentBackgroundColor).siblings().css('background-color',indexObj.backgroundColor);\n            }\n        }\n\n\n        lis.on('touchstart', function (e) {\n            startX = e.changedTouches[0].pageX;\n            startY = e.changedTouches[0].pageY;\n\n        });\n        lis.on('touchmove', handleMove);\n\n        function handleMove(e) {\n            deltaX = e.changedTouches[0].pageX - startX;\n            deltaY = e.changedTouches[0].pageY - startY;\n        }\n\n        lis.on('touchend', function () {\n            timerout = setTimeout(function () {\n                clearTimeout(timerout);\n                if (Math.abs(deltaX) >= obj.effectiveDeltaX && Math.abs(deltaY) < obj.invalidDeltaY) {\n                    clearInterval(timer);\n                    if (deltaX > 0) {\n                        //右滑 prev\n                        prevHandler();\n                    } else if (deltaX < 0) {\n                        nextHandler();\n                    }\n                    timer = setInterval(nextHandler, obj.interval);\n\n                }\n            }, 100);\n        });\n\n\n    }\n\n})(window, document);\n"]}